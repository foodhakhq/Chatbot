2024-09-11 15:49:36,464 - app - DEBUG - Authorization Header: Bearer mS6WabEO.1Qj6ONyvNvHXkWdbWLFi9mLMgHFVV4m7
2024-09-11 15:49:36,464 - app - DEBUG - Token extracted: mS6WabEO.1Qj6ONyvNvHXkWdbWLFi9mLMgHFVV4m7
2024-09-11 16:09:33,309 - app - DEBUG - Authorization Header: Bearer mS6WabEO.1Qj6ONyvNvHXkWdbWLFi9mLMgHFVV4m7
2024-09-11 16:09:33,309 - app - DEBUG - Token extracted: mS6WabEO.1Qj6ONyvNvHXkWdbWLFi9mLMgHFVV4m7
2024-09-11 16:09:34,146 - app - ERROR - Service unavailable, error: 503 recvmsg:Connection reset by peer
Traceback (most recent call last):
  File "/home/ai/chatbot/lib/python3.11/site-packages/google/api_core/grpc_helpers.py", line 76, in error_remapped_callable
    return callable_(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/grpc/_channel.py", line 1181, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/grpc/_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "recvmsg:Connection reset by peer"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_message:"recvmsg:Connection reset by peer", grpc_status:14, created_time:"2024-09-11T16:09:34.145444599+00:00"}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ai/Chatbot-Relationships/Staging/app.py", line 121, in start_session
    response_generator = generate_response(user_input, model_choice, session_key, r, user_id)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/Chatbot-Relationships/Staging/main.py", line 168, in generate_response
    results = vector_store.similarity_search(query, k=5)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/langchain_google_vertexai/vectorstores/vectorstores.py", line 160, in similarity_search
    for document, _ in self.similarity_search_with_score(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/langchain_google_vertexai/vectorstores/vectorstores.py", line 81, in similarity_search_with_score
    return self.similarity_search_by_vector_with_score(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/langchain_google_vertexai/vectorstores/vectorstores.py", line 114, in similarity_search_by_vector_with_score
    neighbors_list = self._searcher.find_neighbors(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/langchain_google_vertexai/vectorstores/_searcher.py", line 162, in find_neighbors
    response = self._endpoint.find_neighbors(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/google/cloud/aiplatform/matching_engine/matching_engine_index_endpoint.py", line 1551, in find_neighbors
    response = self._public_match_client.find_neighbors(find_neighbors_request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/google/cloud/aiplatform_v1beta1/services/match_service/client.py", line 755, in find_neighbors
    response = rpc(
               ^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/google/api_core/gapic_v1/method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ai/chatbot/lib/python3.11/site-packages/google/api_core/grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ServiceUnavailable: 503 recvmsg:Connection reset by peer
